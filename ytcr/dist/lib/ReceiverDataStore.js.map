{"version":3,"file":"ReceiverDataStore.js","sourceRoot":"","sources":["../../src/lib/ReceiverDataStore.ts"],"names":[],"mappings":";;;;;AAAA,uDAA6C;AAC7C,gEAAiC;AAEjC,MAAM,UAAU,GAAG,kBAAkB,CAAC;AACtC,MAAM,GAAG,GAAG,OAAO,CAAC;AAEpB,MAAqB,iBAAkB,SAAQ,4BAAS;IAEtD,6EAA6E;IAC7E,GAAG,CAAI,GAAW,EAAE,KAAQ;QAC1B,MAAM,MAAM,GAAG,qBAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QAC/C,MAAM,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;QACpB,qBAAI,CAAC,cAAc,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;QACxC,qBAAI,CAAC,cAAc,CAAC,uBAAuB,EAAE,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAC,CAAC;QACnE,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;IAC3B,CAAC;IAED,GAAG,CAAI,GAAW;QAChB,MAAM,MAAM,GAAG,qBAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QAC/C,OAAO,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,CAAC;IAC9C,CAAC;IAED,KAAK;QACH,qBAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC;QACnC,qBAAI,CAAC,iBAAiB,CAAC,uBAAuB,CAAC,CAAC;IAClD,CAAC;IAED,SAAS;QACP,MAAM,YAAY,GAAG,qBAAI,CAAC,cAAc,CAAC,uBAAuB,CAAC,CAAC;QAClE,IAAI,YAAY,KAAK,IAAI,EAAE,CAAC;YAC1B,OAAO,KAAK,CAAC;QACf,CAAC;QACD,OAAO,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,GAAG,YAAY,IAAI,GAAG,CAAC;IACpD,CAAC;CACF;AA5BD,oCA4BC","sourcesContent":["import { DataStore } from 'yt-cast-receiver';\nimport ytcr from './YTCRContext';\n\nconst BUNDLE_KEY = 'yt-cast-receiver';\nconst TTL = 3600000;\n\nexport default class ReceiverDataStore extends DataStore {\n\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-parameters\n  set<T>(key: string, value: T): Promise<void> {\n    const bundle = ytcr.getConfigValue(BUNDLE_KEY);\n    bundle[key] = value;\n    ytcr.setConfigValue(BUNDLE_KEY, bundle);\n    ytcr.setConfigValue('dataStoreLastModified', new Date().getTime());\n    return Promise.resolve();\n  }\n\n  get<T>(key: string): Promise<T | null> {\n    const bundle = ytcr.getConfigValue(BUNDLE_KEY);\n    return Promise.resolve(bundle[key] || null);\n  }\n\n  clear() {\n    ytcr.deleteConfigValue(BUNDLE_KEY);\n    ytcr.deleteConfigValue('dataStoreLastModified');\n  }\n\n  isExpired() {\n    const lastModified = ytcr.getConfigValue('dataStoreLastModified');\n    if (lastModified === null) {\n      return false;\n    }\n    return new Date().getTime() - lastModified >= TTL;\n  }\n}\n"]}