{"version":3,"file":"ArticleRenderer.js","sourceRoot":"","sources":["../../../../../../src/lib/controller/browse/view-handlers/renderers/ArticleRenderer.ts"],"names":[],"mappings":";;;;;AAAA,kFAAmD;AACnD,kEAAgF;AAChF,yEAAiD;AAKjD,+DAAuC;AAEvC,MAAqB,eAAgB,SAAQ,sBAA2B;IAEtE,gBAAgB,CAAC,IAAmB;QAClC,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE;YACb,OAAO,IAAI,CAAC;SACb;QACD,MAAM,WAAW,GAAgB;YAC/B,IAAI,EAAE,SAAS;YACf,UAAU,EAAE,IAAI,CAAC,GAAG;SACrB,CAAC;QACF,OAAO;YACL,OAAO,EAAE,UAAU;YACnB,IAAI,EAAE,QAAQ;YACd,KAAK,EAAE,IAAI,CAAC,KAAK;YACjB,MAAM,EAAE,GAAG,IAAI,CAAC,QAAQ,EAAE,IAAI,MAAM,IAAI,CAAC,IAAI,EAAE;YAC/C,QAAQ,EAAE,IAAI,CAAC,SAAS;YACxB,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,IAAI,oBAAU,CAAC,2BAA2B,CAAC,WAAW,CAAC,EAAE;SAC1E,CAAC;IACJ,CAAC;IAED,cAAc,CAAC,IAAmB;QAChC,OAAO;YACL,GAAG,EAAE,IAAI,CAAC,GAAG;YACb,OAAO,EAAE,UAAU;YACnB,IAAI,EAAE,MAAM;YACZ,KAAK,EAAE,IAAI,CAAC,KAAK;YACjB,QAAQ,EAAE,IAAI,CAAC,SAAS;YACxB,MAAM,EAAE,GAAG,yBAAQ,CAAC,OAAO,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,QAAQ,EAAE,IAAI,EAAE;YACxE,IAAI,EAAE,kBAAQ,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC;YACtC,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,yBAAQ,CAAC,OAAO,CAAC,qBAAqB,EAAE,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS;SAC9F,CAAC;IACJ,CAAC;IAED,oBAAoB,CAAC,OAAsB,EAAE,SAA4D,EAAE,KAAkB;QAC3H,MAAM,WAAW,GAAgB;YAC/B,IAAI,EAAE,SAAS;YACf,UAAU,EAAE,OAAO,CAAC,GAAG;YACvB,YAAY,EAAE,SAAS,CAAC,YAAY;YACpC,KAAK,EAAE,KAAK,CAAC,QAAQ,EAAE,QAAQ,EAAE;SAClC,CAAC;QACF,OAAO;YACL,OAAO,EAAE,UAAU;YACnB,IAAI,EAAE,MAAM;YACZ,KAAK,EAAE,KAAK,CAAC,IAAI;YACjB,KAAK,EAAE,SAAS,CAAC,IAAI;YACrB,MAAM,EAAE,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE;YACrD,QAAQ,EAAE,SAAS,CAAC,SAAS;YAC7B,QAAQ,EAAE,KAAK,CAAC,QAAQ;YACxB,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,IAAI,oBAAU,CAAC,2BAA2B,CAAC,WAAW,CAAC,EAAE;SAC1E,CAAC;IACJ,CAAC;CACF;AAnDD,kCAmDC","sourcesContent":["import bandcamp from '../../../../BandcampContext';\nimport BaseRenderer, { RenderedHeader, RenderedListItem } from './BaseRenderer';\nimport UIHelper from '../../../../util/UIHelper';\nimport ArticleEntity, { ArticleEntityMediaItem } from '../../../../entities/ArticleEntity';\nimport TrackEntity from '../../../../entities/TrackEntity';\nimport AlbumEntity from '../../../../entities/AlbumEntity';\nimport { ArticleView } from '../ArticleViewHandler';\nimport ViewHelper from '../ViewHelper';\n\nexport default class ArticleRenderer extends BaseRenderer<ArticleEntity> {\n\n  renderToListItem(data: ArticleEntity): RenderedListItem | null {\n    if (!data.url) {\n      return null;\n    }\n    const articleView: ArticleView = {\n      name: 'article',\n      articleUrl: data.url\n    };\n    return {\n      service: 'bandcamp',\n      type: 'folder',\n      title: data.title,\n      artist: `${data.category?.name} - ${data.date}`,\n      albumart: data.thumbnail,\n      uri: `${this.uri}/${ViewHelper.constructUriSegmentFromView(articleView)}`\n    };\n  }\n\n  renderToHeader(data: ArticleEntity): RenderedHeader | null {\n    return {\n      uri: this.uri,\n      service: 'bandcamp',\n      type: 'song',\n      title: data.title,\n      albumart: data.thumbnail,\n      artist: `${bandcamp.getI18n('BANDCAMP_DAILY')} - ${data.category?.name}`,\n      year: UIHelper.reformatDate(data.date),\n      duration: data.author ? bandcamp.getI18n('BANDCAMP_ARTICLE_BY', data.author.name) : undefined\n    };\n  }\n\n  renderMediaItemTrack(article: ArticleEntity, mediaItem: ArticleEntityMediaItem<AlbumEntity | TrackEntity>, track: TrackEntity): RenderedListItem {\n    const articleView: ArticleView = {\n      name: 'article',\n      articleUrl: article.url,\n      mediaItemRef: mediaItem.mediaItemRef,\n      track: track.position?.toString()\n    };\n    return {\n      service: 'bandcamp',\n      type: 'song',\n      title: track.name,\n      album: mediaItem.name,\n      artist: mediaItem.artist ? mediaItem.artist.name : '',\n      albumart: mediaItem.thumbnail,\n      duration: track.duration,\n      uri: `${this.uri}/${ViewHelper.constructUriSegmentFromView(articleView)}`\n    };\n  }\n}\n"]}