{"version":3,"file":"EntityConverter.js","sourceRoot":"","sources":["../../../src/lib/util/EntityConverter.ts"],"names":[],"mappings":"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","sourcesContent":["import { type Album, type Article, type ArticleListItem, type Artist, type Label, type LabelArtist, type SearchResultAlbum, type SearchResultArtist, type SearchResultLabel, type SearchResultTrack, type Show, type Tag, type Track, type UserKind } from 'bandcamp-fetch';\nimport type AlbumEntity from '../entities/AlbumEntity';\nimport type ArtistEntity from '../entities/ArtistEntity';\nimport type BandEntity from '../entities/BandEntity';\nimport type LabelEntity from '../entities/LabelEntity';\nimport type TrackEntity from '../entities/TrackEntity';\nimport type TagEntity from '../entities/TagEntity';\nimport type ShowEntity from '../entities/ShowEntity';\nimport {type ArticleEntityMediaItem, type ArticleEntitySection} from '../entities/ArticleEntity';\nimport type ArticleEntity from '../entities/ArticleEntity';\n\nexport default class EntityConverter {\n  static convertAlbum(data: Album): AlbumEntity {\n    const result: AlbumEntity = {\n      type: 'album',\n      name: data.name\n    };\n    if (data.url) {\n      result.url = data.url;\n    }\n    if (data.imageUrl) {\n      result.thumbnail = data.imageUrl;\n    }\n    if (data.artist) {\n      result.artist = this.convertArtist({ ...data.artist, type: 'artist' });\n    }\n    if (data.tracks) {\n      result.tracks = data.tracks.map((track) => this.convertTrack({ ...track, type: 'track', album: undefined }));\n    }\n    if (data.featuredTrack) {\n      result.featuredTrack = this.convertTrack({ ...data.featuredTrack, type: 'track' });\n    }\n    if (data.releaseDate) {\n      result.releaseDate = data.releaseDate;\n    }\n\n    result.tracks?.forEach((track) => {\n      track.album = {\n        type: 'album',\n        name: data.name\n      };\n      if (data.url) {\n        track.album.url = data.url;\n      }\n      if (data.imageUrl) {\n        track.album.thumbnail = data.imageUrl;\n        if (!track.thumbnail) {\n          track.thumbnail = data.imageUrl;\n        }\n      }\n      if (!track.artist && result.artist) {\n        track.artist = result.artist;\n      }\n    });\n\n    return result;\n  }\n\n  static convertArtist(data: Artist | LabelArtist) : ArtistEntity {\n    const result: ArtistEntity = {\n      ...this.convertBand({ ...data, type: 'artist' }),\n      type: 'artist'\n    };\n    if (data.label) {\n      result.label = this.convertLabel(data.label);\n    }\n\n    return result;\n  }\n\n  static convertLabel(data: Label): LabelEntity {\n    const result: LabelEntity = {\n      ...this.convertBand(data),\n      type: 'label'\n    };\n\n    return result;\n  }\n\n  static convertTrack(data: Track): TrackEntity {\n    const result: TrackEntity = {\n      type: 'track',\n      name: data.name\n    };\n    if (data.id) {\n      result.id = data.id;\n    }\n    if (data.url) {\n      result.url = data.url;\n    }\n    if (data.duration) {\n      result.duration = data.duration;\n    }\n    if (data.imageUrl) {\n      result.thumbnail = data.imageUrl;\n    }\n    if (data.streamUrlHQ) {\n      result.streamUrl = data.streamUrlHQ;\n    }\n    else if (data.streamUrl) {\n      result.streamUrl = data.streamUrl;\n    }\n    if (data.album) {\n      result.album = this.convertAlbum({ ...data.album, type: 'album', tracks: undefined });\n    }\n    if (data.artist) {\n      result.artist = this.convertArtist({ ...data.artist, type: 'artist' });\n    }\n    if (data.position) {\n      result.position = data.position;\n    }\n\n    if (result.album) {\n      if (!result.album.thumbnail && data.imageUrl) {\n        result.album.thumbnail = data.imageUrl;\n      }\n      if (!result.album.artist && result.artist) {\n        result.album.artist = result.artist;\n      }\n    }\n\n    return result;\n  }\n\n  static convertSearchResultItem(item: SearchResultArtist | SearchResultLabel | SearchResultAlbum | SearchResultTrack): ArtistEntity | LabelEntity | AlbumEntity | TrackEntity {\n    switch (item.type) {\n      case 'artist':\n        return this.convertArtist(item);\n      case 'label':\n        return this.convertLabel(item);\n      case 'album': {\n        const albumArtist = item.artist ? { name: item.artist } : undefined;\n        return this.convertAlbum({ ...item, artist: albumArtist });\n      }\n      case 'track': {\n        const trackArtist = item.artist ? { name: item.artist } : undefined;\n        const trackAlbum = item.album ? { name: item.album } : undefined;\n        return this.convertTrack({\n          ...item,\n          artist: trackArtist,\n          album: trackAlbum\n        });\n      }\n    }\n  }\n\n  static convertShow(data: Show): ShowEntity {\n    const result: ShowEntity = {\n      type: 'show',\n      name: data.name,\n      url: data.url,\n      description: data.description,\n      date: data.publishedDate\n    };\n\n    if (data.imageUrl) {\n      result.thumbnail = data.imageUrl;\n    }\n    if (data.streamUrl?.['mp3-128']) {\n      result.streamUrl = data.streamUrl['mp3-128'];\n    }\n    if (data.duration) {\n      result.duration = data.duration;\n    }\n    if (data.tracks) {\n      result.tracks = data.tracks.map((track) => this.convertTrack({ ...track, type: 'track' }));\n    }\n\n    return result;\n  }\n\n  static convertBand(data: Artist | Label | UserKind): BandEntity {\n    let type: BandEntity['type'];\n    switch ((data as any).type) {\n      case 'artist':\n        type = 'artist';\n        break;\n      case 'label':\n        type = 'label';\n        break;\n      default: // UserKind does not have 'type'\n        type = 'artistOrLabel';\n    }\n    const result: BandEntity = {\n      type,\n      name: data.name\n    };\n    if (data.url) {\n      result.url = data.url;\n    }\n    if (data.imageUrl) {\n      result.thumbnail = data.imageUrl;\n    }\n    if (data.location) {\n      result.location = data.location;\n    }\n\n    return result;\n  }\n\n  static convertTag(data: Tag): TagEntity {\n    const result: TagEntity = {\n      type: 'tag',\n      name: data.name,\n      value: data.value\n    };\n\n    if (data.imageUrls?.[0]) {\n      result.thumbnail = data.imageUrls[0];\n    }\n\n    return result;\n  }\n\n  static convertArticle(data: Article): ArticleEntity {\n    const result: ArticleEntity = {\n      type: 'article',\n      url: data.url,\n      title: data.title,\n      description: data.description,\n      thumbnail: data.imageUrl,\n      date: data.date,\n      category: {\n        name: data.category.name\n      },\n      author: {\n        name: data.author.name,\n        url: data.author.url\n      },\n      mediaItems: [],\n      sections: []\n    };\n\n    if (data.category.url && result.category) {\n      result.category.url = data.category.url;\n    }\n\n    result.mediaItems = data.mediaItems.map((item) => {\n      let entityMediaItem;\n      if (item.type === 'album') {\n        entityMediaItem = {\n          ...this.convertAlbum(item),\n          featuredTrackPosition: item.featuredTrackPosition\n        } as ArticleEntityMediaItem<AlbumEntity>;\n      }\n      else {\n        entityMediaItem = {\n          ...this.convertTrack(item),\n          featuredTrackPosition: item.featuredTrackPosition\n        } as ArticleEntityMediaItem<TrackEntity>;\n      }\n      if (item.mediaItemRef) {\n        entityMediaItem.mediaItemRef = item.mediaItemRef;\n      }\n      return entityMediaItem;\n    });\n\n    result.sections = data.sections.map((section) => {\n      const entitySection: ArticleEntitySection = {\n        text: section.text\n      };\n\n      if (section.mediaItemRef) {\n        entitySection.mediaItemRef = section.mediaItemRef;\n      }\n      if (section.heading) {\n        entitySection.heading = {\n          text: section.heading.text\n        };\n      }\n      return entitySection;\n    });\n\n    return result;\n  }\n\n  static convertArticleListItem(data: ArticleListItem): ArticleEntity {\n    const result: ArticleEntity = {\n      type: 'article',\n      url: data.url,\n      title: data.title,\n      date: data.date\n    };\n    if (data.category) {\n      result.category = {\n        name: data.category.name\n      };\n      if (data.category.url) {\n        result.category.url = data.category.url;\n      }\n    }\n    if (data.imageUrl) {\n      result.thumbnail = data.imageUrl;\n    }\n\n    return result;\n  }\n}\n"]}