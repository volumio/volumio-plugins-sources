{"version":3,"file":"ExplodableViewHandler.js","sourceRoot":"","sources":["../../../../../src/lib/controller/browse/view-handlers/ExplodableViewHandler.ts"],"names":[],"mappings":";;;;;AACA,gFAAwD;AACxD,wEAAgD;AAoBhD,MAA8B,qBAAsC,SAAQ,yBAAkB;IAE5F,KAAK,CAAC,OAAO;QACX,MAAM,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC;QAC9B,IAAI,IAAI,CAAC,SAAS,EAAE;YAClB,OAAO,EAAE,CAAC;SACX;QAED,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC/C,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;YAC1B,MAAM,SAAS,GAAG,uBAAa,CAAC,oCAAoC,CAAC,MAAM,CAAC,CAAC;YAC7E,OAAO,SAAS,CAAC,CAAC,CAAC,CAAE,SAAS,CAAE,CAAC,CAAC,CAAC,EAAE,CAAC;SACvC;QAED,OAAO,MAAM,CAAC,MAAM,CAAc,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;YAClD,MAAM,EAAE,GAAG,uBAAa,CAAC,oCAAoC,CAAC,KAAK,CAAC,CAAC;YACrE,IAAI,EAAE,EAAE;gBACN,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;aACjB;YACD,OAAO,MAAM,CAAC;QAChB,CAAC,EAAE,EAAE,CAAC,CAAC;IACT,CAAC;CAGF;AAxBD,wCAwBC","sourcesContent":["import TrackEntity from '../../../entities/TrackEntity';\nimport ExplodeHelper from '../../../util/ExplodeHelper';\nimport BaseViewHandler from './BaseViewHandler';\nimport { TrackOrigin } from './TrackViewHandler';\nimport View from './View';\n\nexport interface QueueItem {\n  service: 'soundcloud';\n  uri: string;\n  albumart?: string;\n  artist?: string;\n  album?: string;\n  name: string;\n  title: string;\n  duration?: number;\n  samplerate?: string;\n}\n\nexport interface ExplodedTrackInfo extends TrackEntity {\n  origin?: TrackOrigin;\n}\n\nexport default abstract class ExplodableViewHandler<V extends View> extends BaseViewHandler<V> {\n\n  async explode(): Promise<QueueItem[]> {\n    const view = this.currentView;\n    if (view.noExplode) {\n      return [];\n    }\n\n    const tracks = await this.getTracksOnExplode();\n    if (!Array.isArray(tracks)) {\n      const trackInfo = ExplodeHelper.createQueueItemFromExplodedTrackInfo(tracks);\n      return trackInfo ? [ trackInfo ] : [];\n    }\n\n    return tracks.reduce<QueueItem[]>((result, track) => {\n      const qi = ExplodeHelper.createQueueItemFromExplodedTrackInfo(track);\n      if (qi) {\n        result.push(qi);\n      }\n      return result;\n    }, []);\n  }\n\n  protected abstract getTracksOnExplode(): Promise<ExplodedTrackInfo | ExplodedTrackInfo[]>;\n}\n"]}