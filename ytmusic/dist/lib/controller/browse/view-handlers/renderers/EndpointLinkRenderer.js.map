{"version":3,"file":"EndpointLinkRenderer.js","sourceRoot":"","sources":["../../../../../../src/lib/controller/browse/view-handlers/renderers/EndpointLinkRenderer.ts"],"names":[],"mappings":";;;;;;;;;;;AACA,yDAA0D;AAC1D,qFAA6D;AAC7D,+DAAuC;AACvC,kEAAgE;AAEhE,MAAM,iBAAiB,GAA2B;IAChD,mCAAmC,EAAE,aAAa;IAClD,sBAAsB,EAAE,mBAAmB;IAC3C,gBAAgB,EAAE,kBAAkB;IACpC,0BAA0B,EAAE,eAAe;CAC5C,CAAC;AAEF,MAAM,YAAY,GAA2B;IAC3C,sBAAsB,EAAE,yBAAyB;IACjD,6BAA6B,EAAE,mBAAmB,CAAC,oBAAoB;CACxE,CAAC;AAEF,MAAM,sBAAsB,GAA2B;IACrD,iBAAiB,EAAE,eAAe;CACnC,CAAC;AAEF,MAAqB,oBAAqB,SAAQ,sBAAsC;IAAxF;;;IAiEA,CAAC;IA/DC,gBAAgB,CAAC,IAA8B;QAC7C,IAAI,CAAC,wBAAc,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE;YAC3C,OAAO,IAAI,CAAC;SACb;QAED,IAAI,cAAc,CAAC;QACnB,QAAQ,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE;YAC1B,KAAK,uBAAY,CAAC,MAAM;gBACtB,cAAc,GAAG,QAAQ,CAAC;gBAC1B,MAAM;YACR,KAAK,uBAAY,CAAC,MAAM;gBACtB,cAAc,GAAG,sBAAsB,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,SAAS,CAAC;gBACrF,MAAM;YACR;gBACE,cAAc,GAAG,SAAS,CAAC;SAC9B;QAED,MAAM,UAAU,GAAG;YACjB,IAAI,EAAE,cAAc;YACpB,QAAQ,EAAE,IAAI,CAAC,QAAQ;SACxB,CAAC;QACF,MAAM,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,IAAI,oBAAU,CAAC,2BAA2B,CAAC,UAAU,CAAC,EAAE,CAAC;QAEhF,MAAM,MAAM,GAAqB;YAC/B,OAAO,EAAE,SAAS;YAClB,yEAAyE;YACzE,0EAA0E;YAC1E,iBAAiB;YACjB,IAAI,EAAE,wBAAc,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,uBAAY,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,cAAc;YACzF,KAAK,EAAE,IAAI,CAAC,KAAK;YACjB,GAAG;SACJ,CAAC;QAEF,IAAI,IAAI,CAAC,QAAQ,EAAE;YACjB,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC;SAC/B;QAED,IAAI,IAAI,CAAC,SAAS,EAAE;YAClB,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC;SAClC;aACI;YACH,MAAM,CAAC,IAAI,GAAG,uBAAA,IAAI,sEAAS,MAAb,IAAI,EAAU,IAAI,CAAC,IAAI,SAAS,CAAC;SAChD;QAED,OAAO,MAAM,CAAC;IAChB,CAAC;CAkBF;AAjED,uCAiEC;wHAhBU,IAA8B;IACrC,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;IAC9D,IAAI,UAAU,EAAE;QACd,OAAO,UAAU,CAAC;KACnB;IAED,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;IAC/B,IAAI,wBAAc,CAAC,MAAM,CAAC,QAAQ,EAAE,uBAAY,CAAC,MAAM,CAAC,EAAE;QACxD,OAAO,iBAAiB,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,0BAA0B,CAAC;KACnF;SACI,IAAI,wBAAc,CAAC,MAAM,CAAC,QAAQ,EAAE,uBAAY,CAAC,KAAK,CAAC,EAAE;QAC5D,OAAO,mBAAmB,CAAC;KAC5B;IAED,OAAO,IAAI,CAAC;AACd,CAAC","sourcesContent":["import { ContentItem } from '../../../../types';\nimport { EndpointType } from '../../../../types/Endpoint';\nimport EndpointHelper from '../../../../util/EndpointHelper';\nimport ViewHelper from '../ViewHelper';\nimport BaseRenderer, { RenderedListItem } from './BaseRenderer';\n\nconst ICON_BY_BROWSE_ID: Record<string, string> = {\n  'FEmusic_moods_and_genres_category': 'fa fa-music',\n  'FEmusic_new_releases': 'fa fa-certificate',\n  'FEmusic_charts': 'fa fa-line-chart',\n  'FEmusic_moods_and_genres': 'fa fa-smile-o'\n};\n\nconst ICON_BY_NAME: Record<string, string> = {\n  'YTMUSIC_DID_YOU_MEAN': 'fa fa-question-circle-o', // Our own icon type\n  'YTMUSIC_SHOWING_RESULTS_FOR': 'fa fa-info-circle' // Our own icon type\n};\n\nconst VIEW_NAME_BY_BROWSE_ID: Record<string, string> = {\n  'FEsubscriptions': 'subscriptions'\n};\n\nexport default class EndpointLinkRenderer extends BaseRenderer<ContentItem.EndpointLink> {\n\n  renderToListItem(data: ContentItem.EndpointLink): RenderedListItem | null {\n    if (!EndpointHelper.validate(data.endpoint)) {\n      return null;\n    }\n\n    let targetViewName;\n    switch (data.endpoint.type) {\n      case EndpointType.Search:\n        targetViewName = 'search';\n        break;\n      case EndpointType.Browse:\n        targetViewName = VIEW_NAME_BY_BROWSE_ID[data.endpoint.payload.browseId] || 'generic';\n        break;\n      default:\n        targetViewName = 'generic';\n    }\n\n    const targetView = {\n      name: targetViewName,\n      endpoint: data.endpoint\n    };\n    const uri = `${this.uri}/${ViewHelper.constructUriSegmentFromView(targetView)}`;\n\n    const result: RenderedListItem = {\n      service: 'ytmusic',\n      // Setting type to 'album' is important for 'watch' endpoint items, as we\n      // Only want this item to be exploded and not others in the same list when\n      // It is clicked.\n      type: EndpointHelper.isType(data.endpoint, EndpointType.Watch) ? 'album' : 'item-no-menu',\n      title: data.title,\n      uri\n    };\n\n    if (data.subtitle) {\n      result.artist = data.subtitle;\n    }\n\n    if (data.thumbnail) {\n      result.albumart = data.thumbnail;\n    }\n    else {\n      result.icon = this.#getIcon(data) || undefined;\n    }\n\n    return result;\n  }\n\n  #getIcon(data: ContentItem.EndpointLink) {\n    const iconByName = data.icon ? ICON_BY_NAME[data.icon] : null;\n    if (iconByName) {\n      return iconByName;\n    }\n\n    const endpoint = data.endpoint;\n    if (EndpointHelper.isType(endpoint, EndpointType.Browse)) {\n      return ICON_BY_BROWSE_ID[endpoint.payload.browseId] || 'fa fa-arrow-circle-right';\n    }\n    else if (EndpointHelper.isType(endpoint, EndpointType.Watch)) {\n      return 'fa fa-play-circle';\n    }\n\n    return null;\n  }\n}\n"]}