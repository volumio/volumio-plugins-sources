{"version":3,"file":"EndpointHelper.js","sourceRoot":"","sources":["../../../src/lib/util/EndpointHelper.ts"],"names":[],"mappings":";;AAAA,gDAAuF;AAEvF,MAAM,2BAA2B,GAAG;IAClC,kBAAkB;IAClB,oBAAoB;IACpB,aAAa;CACd,CAAC;AAEF,MAAqB,cAAc;IAEjC,MAAM,CAAC,QAAQ,CAAC,QAAmB;QACjC,IAAI,CAAC,QAAQ,EAAE,IAAI,EAAE;YACnB,OAAO,KAAK,CAAC;SACd;QAED,QAAQ,QAAQ,CAAC,IAAI,EAAE;YACrB,KAAK,uBAAY,CAAC,MAAM;gBACtB,OAAO,CAAC,CAAC,QAAQ,CAAC,OAAO,EAAE,QAAQ,IAAI,CAAC,2BAA2B,CAAC,QAAQ,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;YAE1G,KAAK,uBAAY,CAAC,KAAK;gBACrB,OAAO,CAAC,CAAC,QAAQ,CAAC,OAAO,EAAE,OAAO,IAAI,CAAC,CAAC,QAAQ,CAAC,OAAO,EAAE,UAAU,CAAC;YAEvE,KAAK,uBAAY,CAAC,MAAM;gBACtB,OAAO,CAAC,CAAC,QAAQ,CAAC,OAAO,EAAE,KAAK,CAAC;YAEnC,KAAK,uBAAY,CAAC,kBAAkB,CAAC;YACrC,KAAK,uBAAY,CAAC,kBAAkB;gBAClC,OAAO,CAAC,CAAC,QAAQ,CAAC,OAAO,EAAE,KAAK,CAAC;YAEnC;gBACE,OAAO,KAAK,CAAC;SAChB;IACH,CAAC;IAED,MAAM,CAAC,MAAM,CAA2B,QAAqC,EAAE,GAAG,KAAQ;QACxF,IAAI,CAAC,QAAQ,EAAE;YACb,OAAO,KAAK,CAAC;SACd;QACD,OAAO,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,QAAQ,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC;IAChD,CAAC;IAED,MAAM,CAAC,iBAAiB,CAAC,QAA0B;QACjD,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,uBAAY,CAAC,MAAM,CAAC,EAAE;YAC/C,OAAO,KAAK,CAAC;SACd;QAED,OAAO,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC;YAC/C,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,wCAAwC,CAAC,CAAC;IACnF,CAAC;IAED,MAAM,CAAC,eAAe,CAAC,QAA0B;QAC/C,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,uBAAY,CAAC,MAAM,CAAC,EAAE;YAC/C,OAAO,KAAK,CAAC;SACd;QAED,OAAO,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,KAAK,CAAC;YAChD,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,yCAAyC,CAAC,CAAC;IACpF,CAAC;CACF;AAlDD,iCAkDC","sourcesContent":["import Endpoint, { BrowseEndpoint, EndpointOf, EndpointType } from '../types/Endpoint';\n\nconst EXCLUDE_ENDPOINT_BROWSE_IDS = [\n  'SPreport_history',\n  'SPaccount_overview',\n  'SPunlimited'\n];\n\nexport default class EndpointHelper {\n\n  static validate(endpoint?: Endpoint): boolean {\n    if (!endpoint?.type) {\n      return false;\n    }\n\n    switch (endpoint.type) {\n      case EndpointType.Browse:\n        return !!endpoint.payload?.browseId && !EXCLUDE_ENDPOINT_BROWSE_IDS.includes(endpoint.payload.browseId);\n\n      case EndpointType.Watch:\n        return !!endpoint.payload?.videoId || !!endpoint.payload?.playlistId;\n\n      case EndpointType.Search:\n        return !!endpoint.payload?.query;\n\n      case EndpointType.BrowseContinuation:\n      case EndpointType.SearchContinuation:\n        return !!endpoint.payload?.token;\n\n      default:\n        return false;\n    }\n  }\n\n  static isType<K extends EndpointType[]>(endpoint: Endpoint | null | undefined, ...types: K): endpoint is EndpointOf<K[number]> {\n    if (!endpoint) {\n      return false;\n    }\n    return types.some((t) => endpoint.type === t);\n  }\n\n  static isChannelEndpoint(endpoint?: Endpoint | null): endpoint is BrowseEndpoint {\n    if (!this.isType(endpoint, EndpointType.Browse)) {\n      return false;\n    }\n\n    return endpoint.payload.browseId.startsWith('UC') ||\n      endpoint.payload.browseId.startsWith('FEmusic_library_privately_owned_artist');\n  }\n\n  static isAlbumEndpoint(endpoint?: Endpoint | null): endpoint is BrowseEndpoint {\n    if (!this.isType(endpoint, EndpointType.Browse)) {\n      return false;\n    }\n\n    return endpoint.payload.browseId.startsWith('MPR') ||\n      endpoint.payload.browseId.startsWith('FEmusic_library_privately_owned_release');\n  }\n}\n"]}