{"version":3,"file":"AlbumParser.js","sourceRoot":"","sources":["../../../../src/lib/model/parser/AlbumParser.ts"],"names":[],"mappings":";;;;;AAEA,6CAA4C;AAE5C,8DAAsC;AAEtC,MAAqB,WAAY,SAAQ,oBAAiB;IAExD,KAAK,CAAC,QAAQ,CAAC,IAAiB,EAAE,GAAQ;QACxC,MAAM,IAAI,GAAG,MAAM,KAAK,CAAC,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;QAC7C,IAAI,CAAC,IAAI,EAAE;YACT,OAAO,IAAI,CAAC;SACb;QAED,MAAM,OAAO,GAAG,IAAI,CAAC,WAAW,EAAE,MAAM,CAAmB,CAAC,MAAM,EAAE,MAAM,EAAE,EAAE;YAC5E,IAAI,MAAM,CAAC,EAAE,IAAI,MAAM,CAAC,IAAI,EAAE;gBAC5B,MAAM,CAAC,IAAI,CAAC;oBACV,EAAE,EAAE,MAAM,CAAC,EAAE;oBACb,IAAI,EAAE,MAAM,CAAC,IAAI;iBAClB,CAAC,CAAC;aACJ;YACD,OAAO,MAAM,CAAC;QAChB,CAAC,EAAE,EAAE,CAAC,IAAI,EAAE,CAAC;QAEb,MAAM,MAAM,GAAU;YACpB,GAAG,IAAI;YACP,IAAI,EAAE,qBAAU,CAAC,KAAK;YACtB,WAAW,EAAE,IAAI,CAAC,WAAW,IAAI,IAAI;YACrC,OAAO;YACP,QAAQ,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,IAAI;YAC3E,IAAI,EAAE,IAAI,CAAC,cAAc,IAAI,IAAI;YACjC,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC;SAC7B,CAAC;QAEF,OAAO,MAAM,CAAC;IAChB,CAAC;CACF;AA9BD,8BA8BC","sourcesContent":["import { Api } from '@jellyfin/sdk';\nimport { BaseItemDto } from '@jellyfin/sdk/lib/generated-client/models/base-item-dto';\nimport { EntityType } from '../../entities';\nimport Album from '../../entities/Album';\nimport BaseParser from './BaseParser';\n\nexport default class AlbumParser extends BaseParser<Album> {\n\n  async parseDto(data: BaseItemDto, api: Api): Promise<Album | null> {\n    const base = await super.parseDto(data, api);\n    if (!base) {\n      return null;\n    }\n\n    const artists = data.ArtistItems?.reduce<Album['artists']>((result, artist) => {\n      if (artist.Id && artist.Name) {\n        result.push({\n          id: artist.Id,\n          name: artist.Name\n        });\n      }\n      return result;\n    }, []) || [];\n\n    const result: Album = {\n      ...base,\n      type: EntityType.Album,\n      albumArtist: data.AlbumArtist || null,\n      artists,\n      duration: data.RunTimeTicks ? this.ticksToSeconds(data.RunTimeTicks) : null,\n      year: data.ProductionYear || null,\n      genres: this.getGenres(data)\n    };\n\n    return result;\n  }\n}\n"]}